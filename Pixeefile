import requests
from getpass import getpass

# URL of your login form
LOGIN_URL = "https://crmapp.abx.com/crmyu/jsp/login.jsp"

# Prompt for credentials
username = input("Enter username: ")
password = getpass("Enter password: ")

# Create session to persist cookies
session = requests.Session()

# Usually login.jsp expects form fields like "username" and "password"
# (sometimes they are named differently: check HTML form source)
payload = {
    "username": username,
    "password": password
}

# Perform login (POST)
resp = session.post(LOGIN_URL, data=payload, allow_redirects=True)

# Check if login worked
if resp.url != LOGIN_URL and resp.status_code == 200:
    print("✅ Login successful!")
    print("➡️ Redirected to:", resp.url)
else:
    print("❌ Login failed or still on login page.")
    print("Current URL:", resp.url)
    print("Status Code:", resp.status_code)